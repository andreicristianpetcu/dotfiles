{"activationCommands":{"atom-text-editor:not(.mini)":["nuclide-click-to-symbol:activate"]},"author":{"name":"Facebook"},"consumedServices":{"nuclide-click-to-symbol.provider":{"versions":{"0.0.0":"registerDelegate"}}},"dependencies":{"nuclide-analytics":"0.0.22","nuclide-click-to-symbol-delegate":"0.0.22","nuclide-commons":"0.0.22"},"description":"Click to symbol API","devDependencies":{"nuclide-atom-interfaces":"0.0.22"},"engines":{"atom":">=1.0.0"},"main":"./lib/main","name":"nuclide-click-to-symbol","nuclide":{"packageType":"Atom","testRunner":"apm"},"repository":{"type":"git","url":"https://github.com/facebooknuclideapm/nuclide-click-to-symbol"},"version":"0.0.22","readme":"**NOTE:** The official repository for this package is https://github.com/facebook/nuclide.\nPlease file all issues and pull requests there.\n\n# nuclide-click-to-symbol\n\nPluggable click to symbol widget for [Atom](https://atom.io/).\n\n# Disclaimer: This package will go away!\n\nWe are working with Atom to get a more generic version of this package integrated\nas part of Atom core because we believe this functionality should be available to\nall Atom packages out of the box. We also want to move away from the current\ndelegate pattern (because it introduces a dependency on another package:\n`nuclide-click-to-symbol-delegate`) and provide\nan API that is more like [autocomplete-plus](https://github.com/atom/autocomplete-plus).\n\n# How it works\n\n`nuclide-click-to-symbol` is triggered by two events:\n- `alt + mousemove` underlines clickable ranges of text in the text buffer under\nthe mouse cursor.\n- `alt + mousedown` does something if range of text in the text buffer under the\n mouse cursor is clickable.\n\n## API\n\n`nuclide-click-to-symbol` uses the *delegate* pattern so you can insert your\ncustom click-to-symbol behavior. There is an\n[abstract implementation of the delegate](../click-to-symbol-delegate/lib/ClickToSymbolDelegate.js) that\ndefines the required method which you should override:\n\n```javascript\ngetClickableRangesAndCallback(\n    editor: TextEditor,\n    row: number,\n    column: number\n    ): ?Promise<{clickableRanges: Array<Range>, callback: () => void}>\n```\n\nThis method is given the mouse location as editor and position (row and column)\nin `editor`'s text buffer. It should return a `Promise` that resolves to an object\nwith following properties:\n* `clickableRanges` - array of text buffer ranges that are considered clickable.\n* `callback` - function that can handle mouse click to the given location.\n\nIf your delegate doesn't consider the location clickable, then this method should return\n`null` or a `Promise` that resolves to `null`.\n\nThere is also a helper method, `getWordMatchAndRange()`, that is used to find a word\nthat contains the given position. It returns an object literal with the following\nproperties:\n* `match` - word match against the given regex, groups from `String.prototype.match(RegExp)`.\n* `range` - text buffer range of the word.\n\n```javascript\ngetWordMatchAndRange(\n    editor: TextEditor,\n    row: number,\n    column: column,\n    wordRegExp: ?RegExp\n    ): ?{match: Array<string>, range: Range}\n```\nYou can specify your own regex to define a word. If you don't, Atom's default one\nwill be used.\n\nHere are examples of creating your custom delegate, `MyDelegate`, by subclassing\n`AbstractDelegate` from the `nuclide-click-to-symbol-delegate` package. We assume that\n`MyDelegate` is defined in a file named `delegate.coffee` or `delegate.js`.\nThis example delegate recognizes clicks to words in Python files and outputs\nthem into the console:\n\n**CoffeeScript**\n```coffee\n# Subclass the AbstractDelegate from nuclide-click-to-symbol-delegate.\nAbstractDelegate = require 'nuclide-click-to-symbol-delegate'\n\nmodule.exports =\nclass MyDelegate extends AbstractDelegate\n  getClickableRangesAndCallback: (editor, row, column) ->\n    if editor.getGrammar().scopeName is 'source.python'\n      matchAndRange = @getWordMatchAndRange(editor, row, column)\n      if matchAndRange\n        {range} = matchAndRange\n        return Promise.resolve(\n          {\n            clickableRanges: [range],\n            callback: -> console.log(editor.getBuffer().getTextInRange(range)),\n          }\n        )\n    null\n```\n\n**JavaScript**\n```javascript\n'use babel';\n// Subclass the AbstractDelegate from nuclide-click-to-symbol-delegate.\nvar AbstractDelegate = require('nuclide-click-to-symbol-delegate');\n\nclass MyDelegate extends AbstractDelegate {\n  getClickableRangesAndCallback(editor, row, column) {\n    if (editor.getGrammar().scopeName === 'source.python') {\n      var matchAndRange = this.getWordMatchAndRange(editor, row, column);\n      if (matchAndRange) {\n        return Promise.resolve({\n          clickableRanges: [matchAndRange.range],\n          callback: function() {\n            console.log(editor.getBuffer().getTextInRange(matchAndRange.range));\n          },\n        });\n      }\n    }\n    return null;\n  }\n}\n\nmodule.exports = MyDelegate;\n```\n\n\nYou can create and register a delegate from your package\nusing the Services API:\n\n```js\n// main.js\nmodule.exports = {\n  activate() { /*...*/ },\n  createClickToSymbolDelegate() {\n    // Set up click-to-symbol.\n    var ClickToSymbolDelegate = require('./delegate');\n    return new ClickToSymbolDelegate();\n  },\n};\n```\n\nRemember to declare your provide in your `package.json`:\n\n```json\n\"nuclide-click-to-symbol.provider\": {\n  \"versions\": {\n    \"0.0.0\": \"createClickToSymbolDelegate\"\n  }\n}\n```\n\nFinally, note that multiple delegates may be registered via this mechanism,\npossibly by independent packages. This is why it is important that\n`getClickableRangesAndCallback()` returns `null` (or a `Promise` that resolves to `null`)\nif it wouldn't be able to handle click to the given location,\nas it gives the other registered delegates a chance to offer their services.\nEach time the click-to-symbol is triggered, a different delegate may be\nchosen, but it will always be at most one delegate per trigger.\n","readmeFilename":"README.md","bugs":{"url":"https://github.com/facebooknuclideapm/nuclide-click-to-symbol/issues"},"homepage":"https://github.com/facebooknuclideapm/nuclide-click-to-symbol","_id":"nuclide-click-to-symbol@0.0.22","_shasum":"4fc34c801c3cdb9d7576e95c27e35b6657868cd6","_resolved":"file:../d-11569-31013-1lt6gy6/package.tgz","_from":"../d-11569-31013-1lt6gy6/package.tgz"}