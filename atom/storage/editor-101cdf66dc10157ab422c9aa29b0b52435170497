{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":64,"width":1920,"height":1016,"maximized":true},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"project":{"paths":["/home/andrei/Dev/uwezo"],"buffers":[{"text":"############################################################\n# Dockerfile to build Cegeka uwezo\n# Based on phusion/baseimage\n############################################################\nFROM phusion/baseimage:0.9.13\nMAINTAINER Andrei Petcu <Andrei.Petcu@cegeka.com>\n\nRUN apt-get update && apt-get upgrade -y\n\nRUN apt-get install -y git\nRUN DEBIAN_FRONTEND=noninteractive apt-get -y install python-software-properties\nRUN DEBIAN_FRONTEND=noninteractive apt-get -y install software-properties-common\n\nRUN DEBIAN_FRONTEND=noninteractive add-apt-repository ppa:mc3man/trusty-media\nRUN apt-get update\nRUN apt-get install -y ffmpeg gstreamer0.10-ffmpeg\nRUN apt-get install --no-install-recommends --fix-missing -y libreoffice\nRUN apt-get install --no-install-recommends evince-gtk -y && sudo apt-get install texlive-binaries -y\n#evince-thumbnailer -s 1920 broken_pdf.pdf test.png\n#RUN apt-get install tomcat7 -y\n#sudo -u tomcat7 -i bash -c 'soffice --help'\n","markerStore":{"nextMarkerId":19,"markersById":{"0":{"range":{"start":{"row":17,"column":101},"end":{"row":17,"column":101}},"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/uwezo/Dockerfile","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"6598ee373f67c978ff6b1835358819be23add9ea","deserializer":"TextBuffer","version":2},{"text":"'use strict';\n\nangular.module('uwezoApp',\n    [   'uwezo.core', 'upload', 'documents', 'login', 'dashboard', 'fancyTable', 'user', 'tag', 'userCodeValidation',\n        'registration', 'userGroup', 'report', 'uwezo.controllers', 'uwezo.directives', 'ui.bootstrap', 'ngRoute',\n        'ngPDFViewer', 'documentPreview.controllers', 'dialogs.main', 'personal-content', 'ngAnimate', 'uwezo.settings',\n        'colorpicker.module', 'license', 'timer', 'license.warning'\n    ])\n\n    .config(['$routeProvider', 'ROLES', function ($routeProvider, ROLES, MobileSettings) {\n        $routeProvider\n            .when('/', {\n                templateUrl: 'views/home/home.html'\n            })\n            .when('/login', {\n                templateUrl: 'views/login/login.html',\n                isAuthRoute: true\n            })\n            .when('/dashboard', {\n                templateUrl: 'scripts/dashboard/dashboard.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/upload', {\n                templateUrl: 'views/upload/upload.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/document', {\n                templateUrl: 'views/document/document.html',\n                controller: 'DocumentController',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/documentPreview', {\n                templateUrl: 'views/documentPreview/documentPreview.html',\n                controller: 'DocumentPreviewController',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/user', {\n                templateUrl: 'scripts/user/user.html',\n                controller: 'UserController',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/create-user', {\n                templateUrl: 'scripts/user/add_user.html',\n                controller: 'CreateUserController',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/userGroup', {\n                templateUrl: 'scripts/user-group/user-groups.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/userGroupCategory', {\n                templateUrl: 'scripts/user-group/user-groups-categories.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/add-user-group', {\n                templateUrl: 'scripts/user-group/add-user-group.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/tag', {\n                templateUrl: 'scripts/tag/tag.html',\n                controller: 'TagController',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/forgot_password', {\n                templateUrl: 'views/login/forgot_password.html',\n                controller: 'ForgotPasswordController',\n                isAuthRoute: true\n            })\n            .when('/user_code_validation', {\n                templateUrl: 'views/user_code_validation/change_password.html',\n                controller: 'UserCodeValidationController',\n                isAuthRoute: true\n            })\n            .when('/register', {\n                templateUrl: 'views/registration/register.html',\n                controller: 'RegistrationController',\n                isAuthRoute: true\n            })\n            .when('/registration/:code', {\n                templateUrl: 'views/registration/confirm_registration.html',\n                controller: 'ConfirmRegistrationController',\n                isAuthRoute: true\n            })\n            .when('/category', {\n                templateUrl: 'scripts/category/category.html',\n                controller: 'CategoryController',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/add-category', {\n                templateUrl: 'scripts/category/add-category.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/settings', {\n                templateUrl: 'scripts/settings/settings.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/subscription', {\n                templateUrl: 'scripts/subscription/subscription.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/upgrade', {\n                templateUrl: 'scripts/subscription/upgrade.html',\n                roles: [ROLES.owner, ROLES.admin]\n            })\n            .when('/personal-content', {\n                templateUrl: 'scripts/personal-content/personal-content.html',\n                roles: [ROLES.tabletUser],\n                controller: 'MobileSettingsController',\n                resolve: {\n                  mobileSettingsResolved: function(MobileSettings){\n                    return MobileSettings.get().$promise;\n                  }\n                }\n            })\n            .otherwise({redirectTo: '/'});\n    }])\n\n    .run(function ($http, $templateCache) {\n        console.log('Uwezo Angular root module started.');\n        $http.get('/scripts/core/validate-input/error.html').then(function(response) {\n            $templateCache.put('errorTemplate', response.data);\n        });\n    });\n","markerStore":{"nextMarkerId":1,"markersById":{"0":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","editorId":40},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/uwezo-app.js","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"c10764648f2eff14f128ef8dfde305fa00af4d7b","deserializer":"TextBuffer","version":2},{"text":"'use strict';\n\nvar fancyTableDirectives = angular.module('fancyTable.directives', []);\n\nvar FancyTableDirectiveController = function ($scope, $filter, NgTableParams, $element) {\n    $scope.itemsCount = 0;\n    var currentPage = $scope.currentPage || 1;\n\n    $scope.tableParams = new NgTableParams({\n        page: currentPage,            // show first page\n        count: 10          // count per page\n    }, {\n        $scope: $scope,\n        counts: [], // hide page counts control\n        getData: function ($defer, params) {\n            // use build-in angular filter\n            if ($scope.items) {\n              var data = $scope.items;\n\n                //filter data if the controller provides a filterFancyTableItems method\n                if($scope.filterFancyTableItems){\n                    data = $scope.filterFancyTableItems(data);\n                }\n\n                if($scope.useQueryFilter){\n                    data = $filter('filter')(data, $scope.query);\n                }\n\n                // set the itemsCount\n                $scope.itemsCount = data.length;\n                params.total($scope.itemsCount);\n\n                // figure out the table page\n                var page = params.page();\n\n                $scope.$emit('CurrentPage', page);\n\n                // figure out if we need to recompute the page due to filtered items that are not visible\n                var firstItemIndex = (page - 1) * params.count();\n                if (firstItemIndex >= $scope.itemsCount) {\n                    if (page > 0) {\n                        page = page - 1;\n                        params.page(page);\n                    }\n                }\n\n                if (page < 1) {\n                    params.page(1);\n                }\n\n                // set the current page items currentPageItems as a slice of the data\n                $scope.currentPageItems = data.slice(firstItemIndex, page * params.count());\n                $defer.resolve($scope.currentPageItems);\n            }\n        }\n    });\n\n    function refreshTable() {\n        $scope.tableParams.reload();\n        console.log('refresh');\n    }\n\n    function deleteItemFromTable(itemToDelete){\n        var index = $scope.items.indexOf(itemToDelete);\n        if (index > -1) {\n            $scope.items.splice(index, 1);\n        }\n    }\n\n    function deleteItemsFromTable(itemsToDelete){\n        itemsToDelete.forEach(function(item){\n            deleteItemFromTable(item);\n        });\n    }\n\n    $scope.deleteFromTable = function (param) {\n        if($.isArray(param)){\n            deleteItemsFromTable(param);\n        } else {\n            deleteItemFromTable(param);\n        }\n        $scope.tableParams.reload();\n    };\n\n    $scope.useQueryFilter = false;\n\n    var filtersToWatch = $element.attr('fancy-table-filters');\n    if (filtersToWatch) {\n        filtersToWatch.split(',').forEach(function (filterName) {\n            if (filterName === \"query\") {\n                $scope.useQueryFilter = true;\n            }\n            $scope.$watch(filterName, refreshTable);\n        });\n    }\n\n    var itemsAttr = $element.attr('fancy-table');\n\n    $scope.$watch(itemsAttr, function(newValue){\n        $scope.items = newValue;\n        refreshTable();\n    }, true);\n\n    $scope.selectAll = {selected: false};\n    $scope.toggleSelectAll = function () {\n        var items = $scope.filterFancyTableItems !== undefined ? $scope.filterFancyTableItems($scope.items) : $scope.items;\n\n        items.forEach(function (item) {\n            item.selected = $scope.selectAll.selected;\n        });\n        refreshTable();\n    };\n\n};\n\n\nfancyTableDirectives.directive('fancyTable', function () {\n    var directive = {};\n\n    directive.restrict = 'A';\n    directive.replace = true;\n    directive.transclude = true;\n    directive.templateUrl = 'views/fancyTable/fancyTable.html';\n    directive.controller = ['$scope', '$filter', 'ngTableParams', '$element', FancyTableDirectiveController];\n\n    return directive;\n});\n","markerStore":{"nextMarkerId":5,"markersById":{"0":{"range":{"start":{"row":35,"column":30},"end":{"row":35,"column":41}},"properties":{"type":"selection","editorId":44,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":4,"undoStack":[{"type":"checkpoint","id":2,"snapshot":{"0":{"range":[[35,30],[35,41]],"properties":{"type":"selection","editorId":44,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"checkpoint","id":3,"snapshot":{"0":{"range":[[35,30],[35,41]],"properties":{"type":"selection","editorId":44,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}}],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/fancyTable/fancyTable-directives.js","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"d8cb42cca5c0987612d2491fef92beb7e6cecd0b","deserializer":"TextBuffer","version":2},{"text":"(function () {\n    'use strict';\n\n    angular.module('report')\n        .controller('DigestsController', ['$scope', 'DigestResource', 'PageService',\n            function ($scope, DigestResource, PageService) {\n                DigestResource.query().$promise.then(function(items){\n                  $scope.digests = agile.orderBy(items, 'creation.creationDate', true);\n                });\n\n                $scope.sortFields = [\n                  {label: 'Creator', name: 'creation.userFullName'},\n                  {label: 'Date created', name: 'creation.creationDate'}\n                ];\n\n                $scope.$on('CurrentPage', function(page){\n                  var pageNumber = page.currentScope.tableParams.page();\n                  PageService.current = pageNumber;\n                });\n\n                $scope.currentPage = PageService.current;\n            }\n        ])\n        .controller('DigestProspectsController',['$scope', '$routeParams','DigestResource', function($scope, $routeParams, DigestResource){\n          $scope.sortFields = [\n            {label: 'Email', name: 'email'},\n            {label: 'Views', name: 'views'},\n            {label: 'Shares', name: 'shares'},\n            {label: 'Downloaded', name: 'downloaded'}\n          ];\n          $scope.digestId = $routeParams.digestId;\n          $scope.digest = DigestResource.get({digestId: $scope.digestId});\n          $scope.wasDownloaded = function(prospect){\n            return prospect.downloaded ? 'Yes' : 'No';\n          };\n\n        }])\n    ;\n})();\n","markerStore":{"nextMarkerId":5,"markersById":{"0":{"range":{"start":{"row":2,"column":0},"end":{"row":2,"column":0}},"properties":{"type":"selection","editorId":48,"goalScreenRange":null},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":6,"undoStack":[{"type":"checkpoint","id":2,"snapshot":{"0":{"range":[[15,28],[15,39]],"properties":{"type":"selection","editorId":48,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"checkpoint","id":3,"snapshot":{"0":{"range":[[15,28],[15,39]],"properties":{"type":"selection","editorId":48,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"checkpoint","id":4,"snapshot":{"0":{"range":[[15,28],[15,39]],"properties":{"type":"selection","editorId":48,"goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"checkpoint","id":5,"snapshot":{"0":{"range":[[15,28],[15,39]],"properties":{"type":"selection","editorId":48,"goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}}],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/report/report-controllers.js","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"ff4536524e8ac9f47e9c283b5e1b2877b998a9e4","deserializer":"TextBuffer","version":2}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":36,"softTabs":true,"displayBuffer":{"id":37,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/uwezo/Dockerfile","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":40,"softTabs":true,"displayBuffer":{"id":41,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/uwezo-app.js","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":44,"softTabs":true,"displayBuffer":{"id":45,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/fancyTable/fancyTable-directives.js","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":48,"softTabs":true,"displayBuffer":{"id":49,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/report/report-controllers.js","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/report/report-controllers.js","focused":true,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-javascript","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"symbol-gen":{},"find-and-replace":{"viewState":"","modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false,"wholeWord":false},"projectViewState":"","resultsModelState":{"useRegex":false,"caseSensitive":false},"findHistory":["broad"],"replaceHistory":[],"pathsHistory":[]},"fuzzy-finder":{"/home/andrei/Dev/uwezo/Dockerfile":1436394036088,"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/uwezo-app.js":1436394176032,"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/fancyTable/fancyTable-directives.js":1436394180050,"/home/andrei/Dev/uwezo/uwezo-presentation/yo/app/scripts/report/report-controllers.js":1436394194196},"keybinding-resolver":{},"metrics":{"sessionLength":722762},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/home/andrei/Dev/uwezo":{"isExpanded":true,"entries":{".git":{"isExpanded":false,"entries":{}},".idea":{"isExpanded":false,"entries":{}},".vagrant":{"isExpanded":false,"entries":{}},"benchmark":{"isExpanded":false,"entries":{}},"docs":{"isExpanded":false,"entries":{}},"uwezo-application":{"isExpanded":false,"entries":{}},"uwezo-infrastructure":{"isExpanded":false,"entries":{}},"uwezo-presentation":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/home/andrei/Dev/uwezo/uwezo-presentation","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}