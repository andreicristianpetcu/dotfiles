{"mode":"editor","version":1,"windowDimensions":{"x":0,"y":64,"width":1920,"height":1016,"maximized":true},"grammars":{"deserializer":"GrammarRegistry","grammarOverridesByPath":{}},"project":{"paths":["/home/andrei/Dev/riweb"],"buffers":[{"text":"'use strict';\n\nangular.module('riwebApp')\n    .service('RipplePeersService', function (RippleRemoteService) {\n        var peersInfo = {\n            peers: []\n        };\n        \n        return {\n            refreshPeers: function (callback) {\n                RippleRemoteService.onRemotePresent(function (remote) {\n                    remote.requestPeers(function (error, info) {\n                        if(info && info.peers){\n                            peersInfo.peers = info.peers;\n                        } else {\n                            peersInfo.peers = undefined;\n                        }\n                        if(callback){\n                            callback(peersInfo);\n                        }\n                    });\n                });\n            },\n            peersInfo: peersInfo\n        };\n    });\n","markerStore":{"nextMarkerId":44,"markersById":{"0":{"range":{"start":{"row":7,"column":8},"end":{"row":7,"column":8}},"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":{"start":{"row":2,"column":25},"end":{"row":2,"column":26}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":{"start":{"row":2,"column":14},"end":{"row":2,"column":15}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":{"start":{"row":2,"column":25},"end":{"row":2,"column":26}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":{"start":{"row":2,"column":14},"end":{"row":2,"column":15}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"43":{"range":{"start":{"row":7,"column":0},"end":{"row":8,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":false}},"version":2},"history":{"version":2,"nextCheckpointId":36,"undoStack":[{"type":"group-start","snapshot":{"0":{"range":[[6,10],[6,10]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[6,10],[6,10]],"newRange":[[6,10],[7,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[7,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,8]],"newRange":[[7,8],[7,9]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[7,9],[7,9]],"newRange":[[7,9],[7,10]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[7,10],[7,10]],"newRange":[[7,10],[7,11]],"oldText":"","newText":"n"}},{"type":"group-end","snapshot":{"0":{"range":[[7,11],[7,11]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,11],[7,11]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,11]],"newRange":[[7,8],[7,15]],"oldText":"con","newText":"console"}},{"type":"group-end","snapshot":{"0":{"range":[[7,15],[7,15]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,15],[7,15]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,15]],"newRange":[[7,8],[7,8]],"oldText":"console","newText":""}},{"type":"group-end","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,8]],"newRange":[[7,8],[7,9]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[7,9],[7,9]],"newRange":[[7,9],[7,10]],"oldText":"","newText":"l"}},{"type":"group-end","snapshot":{"0":{"range":[[7,10],[7,10]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,10],[7,10]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,10]],"newRange":[[7,8],[7,13]],"oldText":"cl","newText":"class"}},{"type":"group-end","snapshot":{"0":{"range":[[7,13],[7,13]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,0],[8,0]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,0],[8,0]],"newRange":[[7,0],[7,0]],"oldText":"        class\n","newText":""}},{"type":"group-end","snapshot":{"0":{"range":[[7,0],[7,0]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[6,10],[6,10]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[6,10],[6,10]],"newRange":[[6,10],[7,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[7,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,8]],"newRange":[[7,8],[7,9]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[7,9],[7,9]],"newRange":[[7,9],[7,10]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[7,10],[7,10]],"newRange":[[7,10],[7,12]],"oldText":"","newText":"  "}},{"type":"group-end","snapshot":{"0":{"range":[[7,12],[7,12]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,12],[7,12]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,11],[7,12]],"newRange":[[7,11],[7,11]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[7,10],[7,11]],"newRange":[[7,10],[7,10]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[7,9],[7,10]],"newRange":[[7,9],[7,9]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[7,8],[7,9]],"newRange":[[7,8],[7,8]],"oldText":"f","newText":""}},{"type":"group-end","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":8,"goalScreenRange":null,"preserveFolds":true,"clip":"forward"},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"7":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"8":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"9":{"range":[[2,25],[2,26]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"10":{"range":[[2,14],[2,15]],"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}}}],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/riweb/client/app/RipplePeersService/RipplePeersService.service.js","modifiedWhenLastPersisted":true,"digestWhenLastPersisted":"d790768233024fb6762216653766ba0151d5ff28","deserializer":"TextBuffer","version":2},{"text":"'use strict';\n\nangular.module('riwebApp')\n    .service('RippleWalletService', function (Wallet, RippleRemoteService, RippleAccountService, TrustLineService,\n                                              Auth, RIPPLE_ROOT_ACCOUNT) {\n\n        var walletInfo = {\n            wallet: {}\n        };\n\n        var theRemote;\n        var currentUser = Auth.getCurrentUser();\n\n        function showTransactionResultMessage(err) {\n            if (err) {\n                swal('Error', 'Failed to set the DefaultRipple flag on the cold wallet account: ' + err.message, 'error');\n            }\n            else {\n                swal('Info', 'Set the DefaultRipple flag on the cold wallet account', 'info');\n            }\n        }\n\n        function getCurrentUserWallet(callback){\n            currentUser = Auth.getCurrentUser();\n            Wallet.getByOwnerEmail({ownerEmail: currentUser.email}).$promise.then(function(data){\n                if(data.length >= 1){\n                    walletInfo.wallet = data[0];\n                } else {\n                    walletInfo.wallet = {};\n                }\n                callback(data);\n            });\n        }\n\n        function setAccountFlagsForAdmin(err, flags) {\n            if (err) {\n                swal('Error', 'There was an error communicating with the server: ' + err.message, 'error');\n            }\n            else {\n                /*jshint bitwise: false*/\n                if (!(flags & 0x00800000)) {\n                    // OK, let's set the DefaultRipple flag if it's not there\n                    theRemote.setSecret(RIPPLE_ROOT_ACCOUNT.address, RIPPLE_ROOT_ACCOUNT.secret);\n\n                    var transaction = theRemote.createTransaction('AccountSet', {\n                        account: RIPPLE_ROOT_ACCOUNT.address,\n                        set: 'DefaultRipple'\n                    });\n\n                    transaction.submit(showTransactionResultMessage);\n\n                } else {\n                    console.log('The admin account wallet has the DefaultRipple flag active, flags are: ' + flags);\n                }\n            }\n        }\n\n        function checkColdWalletFlagsWithRemote(remote) {\n            theRemote = remote;\n\n            var reqOptions = {\n                account: RIPPLE_ROOT_ACCOUNT.address,\n                ledger: 'validated'\n            };\n\n            theRemote.requestAccountFlags(reqOptions, setAccountFlagsForAdmin);\n        }\n\n        function checkColdWalletFlags() {\n            RippleRemoteService.onRemotePresent(checkColdWalletFlagsWithRemote);\n        }\n\n        function loadCurrentUserBalance(callback) {\n            RippleAccountService.resetAccount();\n            if (Auth.getCurrentUser().email) {\n\n                getCurrentUserWallet(function (data) {\n                    if (data.length >= 1) {\n                        walletInfo.wallet = data[0];\n                        RippleAccountService.loadBalance(walletInfo.wallet.publicKey, callback);\n                    } else {\n                        createWallet();\n                    }\n                });\n            }\n        }\n\n        function saveWallet(newWallet) {\n            Wallet.save(newWallet,\n                function () {\n                    walletInfo.wallet = newWallet;\n                    makeInitialXRPTransfer(newWallet.publicKey);\n                },\n                function () {\n                    walletInfo.wallet = {};\n                    swal('Error', 'Sorry there was a problem processing your request!', 'error');\n                });\n        }\n\n        function buildNewInitialXRPTransaction(destinationAddress) {\n            return theRemote.createTransaction('Payment', {\n                account: RIPPLE_ROOT_ACCOUNT.address,\n                destination: destinationAddress,\n                amount: 300000000\n            });\n        }\n\n        function makeInitialXRPTransfer(destinationAddress) {\n            //do not send money to self\n            if (destinationAddress !== RIPPLE_ROOT_ACCOUNT.address) {\n                RippleRemoteService.onRemotePresent(function (remote) {\n                    theRemote = remote;\n                    theRemote.setSecret(RIPPLE_ROOT_ACCOUNT.address, RIPPLE_ROOT_ACCOUNT.secret);\n\n                    var transaction = buildNewInitialXRPTransaction(destinationAddress);\n\n                    transaction.submit(function (err) {\n                        if (!err) {\n                            var makeInitialTrustLines = TrustLineService.buildMakeInitialTrustLines(walletInfo, remote);\n                            makeInitialTrustLines(destinationAddress);\n                        } else {\n                            swal('Error', 'Sorry there was a problem processing your request! ' + err.message, 'error');\n                        }\n                    });\n                });\n            } else {\n                loadCurrentUserBalance();\n            }\n        }\n\n        function generateNewWallet() {\n            var newWallet = {};\n            newWallet.ownerEmail = currentUser.email;\n            // generate new wallet\n            var wallet = ripple.Wallet.generate();\n            newWallet.publicKey = wallet.address;\n            newWallet.passphrase = wallet.secret;\n            saveWallet(newWallet);\n        }\n\n        function reuseAdminWallet() {\n            var newWallet = {};\n            newWallet.ownerEmail = currentUser.email;\n            //reuse existing known wallet\n            newWallet.publicKey = RIPPLE_ROOT_ACCOUNT.address;\n            newWallet.passphrase = RIPPLE_ROOT_ACCOUNT.secret;\n            saveWallet(newWallet);\n            checkColdWalletFlags();\n        }\n\n        function generateWalletIfMissing(existingWalletFound) {\n            if (existingWalletFound.length < 1) {\n                if (currentUser.role === 'admin') {\n                    reuseAdminWallet();\n                } else {\n                    generateNewWallet();\n                }\n            }\n        }\n\n        function createWallet() {\n            console.log('Creating wallet');\n            if (currentUser) {\n                if (currentUser.email !== walletInfo.makingWalletForEmail) {\n                    walletInfo.makingWalletForEmail = currentUser.email;\n                    getCurrentUserWallet(generateWalletIfMissing);\n                }\n            }\n        }\n\n        return {\n            getCurrentUserWallet: getCurrentUserWallet,\n            createWallet: createWallet,\n            loadCurrentUserBalance: loadCurrentUserBalance,\n            walletInfo: walletInfo\n        };\n    });\n","markerStore":{"nextMarkerId":15,"markersById":{"0":{"range":{"start":{"row":11,"column":48},"end":{"row":11,"column":48}},"properties":{"type":"selection","editorId":26,"goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"1":{"range":{"start":{"row":13,"column":51},"end":{"row":13,"column":52}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true},"2":{"range":{"start":{"row":20,"column":8},"end":{"row":20,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":true}},"version":2},"history":{"version":2,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/riweb/client/app/RippleWalletService/RippleWalletService.service.js","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"65f25e9bf55e61e427490c867006cb0d06a4107b","deserializer":"TextBuffer","version":2},{"text":"<div ng-include=\"'components/navbar/navbar.html'\"></div>\n\n<div class=\"container\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\">\n            <h3 id=\"panel-title\" class=\"panel-title\">My account: <strong>{{getMyAccountUser().email}}</strong></h3>\n        </div>\n        <div class=\"panel-body\">\n            <h4 id=\"panel-title\" class=\"panel-title\" ng-show=\"accountInfo.account\">Account: <strong>{{accountInfo.account}}</strong></h4>\n            <h4 ng-show=\"accountInfo.balance\">Current balance: <strong>{{accountInfo.balance}}</strong> €</h4>\n\n            <div class=\"row\">\n                <div class=\"col-xs-12\">\n                    <div class=\"alert alert-warning\" ng-hide=\"accountInfo.account\" role=\"alert\">Please wait, you do not have an wallet yet.</div>\n                </div>\n            </div>\n\n            <div class=\"row\">\n                <div class=\"col-xs-12\">\n                    <button ng-show=\"accountInfo.account\" type=\"button\" class=\"btn btn-default btn-lg btn-success\"\n                            aria-label=\"Left Align\"\n                            ng-click=\"transferMoney()\">\n                        <span class=\"glyphicon glyphicon-euro\" aria-hidden=\"true\"></span>\n                        Transfer money\n                    </button>\n                <span ng-show=\"accountInfo.account\">\n                    Amount to transfer <input ng-model=\"amountToTransfer\"></input>\n                </span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"panel panel-info\" ng-show=\"accountInfo.transactions\">\n        <div class=\"panel-heading\">\n            <h3 id=\"panel-title\" class=\"panel-title\">Transactions</strong></h3>\n        </div>\n        <div class=\"panel-body\">\n            <div class=\"alert alert-warning\" ng-hide=\"accountInfo.transactions\" role=\"alert\">No transactions yet</div>\n\n            <table class=\"table\" ng-show=\"accountInfo.transactions\">\n                <thead>\n                <tr>\n                    <th>From</th>\n                    <th>To</th>\n                    <th>Amount</th>\n                    <th>Fee</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat=\"transaction in accountInfo.transactions\">\n                    <td>{{transaction.tx.Account}}</td>\n                    <td>{{transaction.tx.Destination}}</td>\n                    <td>{{getAmountDisplayText(transaction.tx.Amount)}}</td>\n                    <td>{{transaction.tx.Fee}}</td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\">\n            <h3 id=\"panel-title\" class=\"panel-title\">Network status</strong></h3>\n        </div>\n        <div class=\"panel-body\">\n            <div class=\"alert alert-warning\" ng-hide=\"serverInfo.server_name\" role=\"alert\">Not connected to server yet</div>\n            <h4 ng-show=\"serverInfo.server_name\">Connected to server: <strong>{{serverInfo.server_name}}</strong></h4>\n            <h4 ng-show=\"serverInfo.ledgerClosed\">Last ledger closed: <strong>{{serverInfo.ledgerClosed}}</strong></h4>\n            <h4>{{serverInfo.error}}</h4>\n        </div>\n    </div>\n    <div class=\"panel panel-info\" ng-show=\"serverInfo.server_name\">\n        <div class=\"panel-heading\">\n            <h3 id=\"panel-title\" class=\"panel-title\">Peers</strong></h3>\n        </div>\n        <div class=\"panel-body\">\n            <div class=\"alert alert-warning\" ng-hide=\"peersInfo.peers\" role=\"alert\">Not connected to peers</div>\n            <table class=\"table\" ng-show=\"peersInfo.peers\">\n                <thead>\n                <tr>\n                    <th>IP</th>\n                    <th>Ledger</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat=\"peer in peersInfo.peers\">\n                    <td>{{peer.address}}</td>\n                    <td>{{peer.ledger}}</td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n\n\n</div>\n","markerStore":{"nextMarkerId":28,"markersById":{"0":{"range":{"start":{"row":21,"column":51},"end":{"row":21,"column":51}},"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true},"26":{"range":{"start":{"row":21,"column":51},"end":{"row":21,"column":52}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false},"27":{"range":{"start":{"row":21,"column":52},"end":{"row":21,"column":53}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap","maintainHistory":false}},"version":2},"history":{"version":2,"nextCheckpointId":20,"undoStack":[{"type":"group-start","snapshot":{"0":{"range":[[6,14],[6,14]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[6,14],[6,14]],"newRange":[[6,14],[7,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[7,0],[7,0]],"newRange":[[7,0],[7,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,8],[7,8]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,8],[7,8]],"newRange":[[7,8],[7,9]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[7,9],[7,9]],"newRange":[[7,9],[7,10]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[7,10],[7,10]],"newRange":[[7,10],[7,11]],"oldText":"","newText":"v"}},{"type":"change","content":{"oldRange":[[7,11],[7,11]],"newRange":[[7,11],[7,12]],"oldText":"","newText":"."}},{"type":"group-end","snapshot":{"0":{"range":[[7,12],[7,12]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,12],[7,12]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,12],[7,12]],"newRange":[[7,12],[7,13]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[7,13],[7,13]],"newRange":[[7,13],[7,14]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[7,14],[7,14]],"newRange":[[7,14],[7,15]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"0":{"range":[[7,15],[7,15]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,15],[7,15]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,15],[7,15]],"newRange":[[7,15],[7,16]],"oldText":"","newText":" "}},{"type":"group-end","snapshot":{"0":{"range":[[7,16],[7,16]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,16],[7,16]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,15],[7,16]],"newRange":[[7,15],[7,15]],"oldText":" ","newText":""}},{"type":"group-end","snapshot":{"0":{"range":[[7,15],[7,15]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":true,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"group-start","snapshot":{"0":{"range":[[7,0],[8,0]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[7,0],[8,0]],"newRange":[[7,0],[7,0]],"oldText":"        div.css\n","newText":""}},{"type":"group-end","snapshot":{"0":{"range":[[7,0],[7,0]],"properties":{"type":"selection","editorId":36,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}}],"redoStack":[]},"encoding":"utf8","filePath":"/home/andrei/Dev/riweb/client/app/myaccount/myaccount.html","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"f56d5f9a6f5bc19f7825be4bc1efcce775c5ffad","deserializer":"TextBuffer","version":2}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":3,"items":[{"id":8,"softTabs":true,"displayBuffer":{"id":9,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/riweb/client/app/RipplePeersService/RipplePeersService.service.js","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":36,"softTabs":true,"displayBuffer":{"id":37,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/riweb/client/app/myaccount/myaccount.html","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"},{"id":26,"softTabs":true,"displayBuffer":{"id":27,"softWrapped":false,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/home/andrei/Dev/riweb/client/app/RippleWalletService/RippleWalletService.service.js","largeFileMode":false,"deserializer":"TokenizedBuffer"},"largeFileMode":false,"deserializer":"DisplayBuffer"},"deserializer":"TextEditor"}],"activeItemURI":"/home/andrei/Dev/riweb/client/app/myaccount/myaccount.html","focused":true,"flexScale":1,"deserializer":"Pane"},"activePaneId":3,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-javascript","language-html","language-hyperlink","language-todo"],"deserializer":"Workspace"},"packageStates":{"fuzzy-finder":{"/home/andrei/Dev/riweb/client/app/RipplePeersService/RipplePeersService.service.js":1440528259609,"/home/andrei/Dev/riweb/client/app/myaccount/myaccount.html":1440528450811,"/home/andrei/Dev/riweb/client/app/RippleWalletService/RippleWalletService.service.js":1436394956468},"metrics":{"sessionLength":260872},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/home/andrei/Dev/riweb":{"isExpanded":false,"entries":{}}},"selectedPath":"/home/andrei/Dev/riweb","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200},"symbol-gen":{},"keybinding-resolver":{}}}